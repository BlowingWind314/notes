%\documentclass[UTF8,a4paper,openany,twoside,fancyhdr,hyperref,sub3section]{ctexbook}
\usepackage{amsmath,bm,graphicx,amssymb,mathrsfs,mathtools,geometry,framed}
\ctexset{today=old}
\ctexset{chapter={format+={\raggedright\huge},beforeskip=-2cm,afterskip=3em}}

\DeclareFontFamily{U}{rsfs}{\skewchar\font127 }
\DeclareFontShape{U}{rsfs}{m}{n}{%
   <-6> rsfs5
   <6-8> rsfs7
   <8-> rsfs10
}{}
%去警告Font shape `U/rsfs/m/n' in size <22.08249> not available

\usepackage[svgnames]{xcolor}

\usepackage[all]{xy}

\usepackage[perpage]{footmisc}
%脚注每页清除编号

\usepackage[inline]{enumitem}
\setlist{leftmargin=1.5cm,itemsep=1pt,parsep=1pt,topsep=1pt}
\setlist[enumerate]{label=\textnormal{(\arabic*)}}
\setlist[itemize]{label=\textbullet}

\raggedbottom
%页面显示自然长度，不作内容拉伸填充

\definecolor{shadecolor}{RGB}{240,247,255}
\definecolor{link}{RGB}{123,104,238}

\hypersetup{colorlinks=true,linkcolor=link}

\numberwithin{equation}{section}

\usepackage[amsmath,thmmarks,hyperref]{ntheorem}
\theoremstyle{nonumberplain}
\theoremheaderfont{\heiti}
\theorembodyfont{\fangsong}
{
    \theorempreskip{3pt}
    \theorempostskip{5pt}
    \theoremsymbol{\mbox{$\Box$}}
    \newtheorem{proof}{证}
    \newtheorem{sol}{解}
}
{
    \newtheorem{definition}{定义}
    \newtheorem{remark}{注}
}

\newcounter{thmnumber}[section]
\setcounter{thmnumber}{1}
\newcounter{propnumber}[section]
\setcounter{propnumber}{1}
\newcounter{lemmanumber}[section]
\setcounter{lemmanumber}{1}
\newenvironment{thm}[1][]{\vspace*{-8pt}\begin{shaded}\stepcounter{thmnumber}\par{\noindent\bf 定理\arabic{thmnumber}#1\enspace}}{\end{shaded}\par\vspace*{-8pt}}
\newenvironment{prop}[1][]{\vspace*{-8pt}\begin{shaded}\stepcounter{propnumber}\par{\noindent\bf 命题\arabic{propnumber}#1\enspace}}{\end{shaded}\par\vspace*{-8pt}}
\newenvironment{cor}[1][]{\par{\noindent\bf 推论#1\enspace}}{\par}
\newenvironment{cor*}[1][]{\vspace*{-8pt}\begin{shaded}\par{\noindent\bf 推论#1\enspace}}{\end{shaded}\par\vspace*{-8pt}}
\newenvironment{lemma}[1][]{\stepcounter{lemmanumber}\par{\noindent\bf 引理\arabic{lemmanumber}#1\enspace}}{\par}
\newenvironment{lemma*}[1][]{\vspace*{-8pt}\begin{shaded}\stepcounter{lemmanumber}\par{\noindent\bf 引理\arabic{lemmanumber}#1\enspace}}{\end{shaded}\par\vspace*{-8pt}}
\newenvironment{prob}[1][]{\par{\noindent\bfseries 题目#1\enspace}}{\par}

%\newenvironment{sol}[1][]{{\par\noindent\bf 解#1\quad}}{\hfill $\square$\par}
%\newenvironment{proof}[1][]{{\noindent\bf 证#1\quad}}{\hfill $\square$\par}
%\newenvironment{note}{{\par\noindent\bf 注\quad}\it}{\par}

\renewcommand\qed{\hspace*{\fill}\mbox{$\Box$}}

\DeclareMathOperator\dif{d\!}
\DeclareMathOperator\rank{rank}
\DeclareMathOperator\tr{Tr}
%\newcommand\abs[1]{\left\lvert #1 \right\rvert}
\newcommand\wavy[1]{\widetilde{#1}}
\newcommand\mi{\mathrm{i}}
\newcommand\nsg{\trianglelefteq}
\newcommand\pnsg{\vartriangleleft}

\renewcommand\Im{\operatorname*{Im}}
\renewcommand\hom{\operatorname*{Hom}}

\renewcommand\bullet{\text{\textbullet}}

\renewcommand\*{\discretionary{\,\mbox{$\cdot$}}{}{}}

\allowdisplaybreaks
\geometry{left=3cm,right=3cm,top=4cm,bottom=3cm,footnotesep=5mm}
\pagestyle{fancy}
\cfoot{\texttt\thepage}
\fancyhead[RO,LE]{\leftmark}
\chead{\LaTeX}
\fancyhead[RE,LO]{抽象代数基础}
\renewcommand{\headrulewidth}{0.8pt}

\fancypagestyle{myheadings}{
    \fancyhf{}
    \renewcommand{\headrulewidth}{0pt}
    \cfoot{\texttt{contents}}
}

\author{yxy}
%\date{\today}
\title{\textbf{抽象代数基础}}

\AtBeginDocument{\addtocontents{toc}{\protect\thispagestyle{myheadings}}}
%改目录第一页格式